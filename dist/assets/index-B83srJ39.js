import{j as C}from"./kaplay-DbgAWYSR.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();function P(){e.loadRoot("./"),e.loadBitmapFont("Alkhemikal","fonts/Alkhemikal.png",24,32,{filter:"nearest",chars:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"}),e.loadBitmapFont("NameHere","fonts/NameHere.png",24,32,{filter:"nearest",chars:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"}),e.loadBitmapFont("Numbers","fonts/Number.png",30,30,{filter:"nearest",chars:" #$%'()*+,-./0123456789:<=>"}),e.loadBitmapFont("Classic","fonts/ClassicShit.png",30,30,{filter:"nearest",chars:" !&'()*+,.0123456789:;=?ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"}),e.loadFont("Menu","fonts/MenuCard.ttf"),e.loadSprite("TITLE","sprites/title.png")}function x(t=48){let r=t;const a=128,s=e.height()-r*2;if(s>a){const n=s-a;r=r+n/2}return r}const e=C({global:!1,scale:4,font:"NameHere",crisp:!0,texFilter:"nearest",loadingScreen:!0,background:[10,10,20],debug:!0,buttons:{primary:{keyboard:["x","up"],gamepad:["south"],mouse:["left"]},secondary:{keyboard:["z","left"],gamepad:["west"],mouse:["right"]}}}),i={difficulty:e.choose(["easy","medium","hard"]),mode:"start",score:0,highscore:0,yOffset:x(),xOffset:64,xPosition:e.center().x,spacing:6,tintColor:[244,78,56]};e.onResize(()=>{i.yOffset=x(),i.xPosition=e.center().x});P();e.loadShader("tint",null,`
  uniform vec3 u_color;

  vec4 frag(vec2 pos, vec2 uv, vec4 color, sampler2D tex) {
      vec4 c = def_frag();
      return vec4(u_color.x * c.r,
        u_color.y * c.g,
        u_color.z * c.b,
        c.a);
  }
`);const u=[[139,200,254],[207,171,74],[244,78,56],[0,255,174],[166,146,176]],g=[];function m(){const t=u.map((o,c)=>c).filter(o=>!g.includes(o)),r=t[Math.floor(Math.random()*t.length)];g.push(r),g.length>2&&g.shift(),i.tintColor=u[r];const[a,s,n]=u[r].map(o=>o/255);e.usePostEffect("tint",()=>({u_color:e.rgb(a,s,n)}))}m();e.onLoading(t=>{e.randSeed(Date.now()),e.drawText({text:(Math.floor(t)+" %").toString(),size:10,width:120,anchor:"center",align:"center",letterSpacing:-2,pos:e.center(),color:e.WHITE})});e.scene("over",()=>{e.add([e.sprite("restart"),e.pos(e.center().x,e.center().y+48),e.anchor("center"),e.area(),"restart"]),i.score>i.highscore&&(i.highscore=i.score),e.onClick("restart",()=>{i.score=0,i.mode="start",e.go("game")}),e.onDraw(()=>{e.drawSprite({sprite:"RIP",width:24,height:24,pos:e.vec2(e.center().x,e.center().y-64),anchor:"center"}),e.drawText({text:"GAME OVER",font:"Alkhemikal",anchor:"center",align:"center",pos:e.vec2(e.center().x,e.center().y-26),letterSpacing:-4,size:28}),e.drawText({text:"Score: "+i.score,anchor:"center",align:"center",pos:e.center(),letterSpacing:-5,size:16}),e.drawText({text:"Highscore: "+i.highscore,anchor:"center",align:"center",pos:e.vec2(e.center().x,e.center().y+16),letterSpacing:-5,size:16}),e.drawText({text:"by FABRIC VISIONS",anchor:"center",align:"center",pos:e.vec2(e.center().x,e.height()-10),letterSpacing:-2.8,size:8,opacity:.4})})});function S(t,r=.2,a=3){const s=t.pos.x;t.tween(0,1,r,n=>{const o=n*10*Math.PI*2*r;t.pos.x=s+Math.sin(o)*a},e.easings.easeOutCubic)}function y(t){t.animate("pos",[e.vec2(0),e.vec2(0,2)],{duration:1,direction:"ping-pong",easing:e.easings.easeInOutSine})}function w(t){t.tween(e.vec2(.6,1.2),e.vec2(1),1,r=>{t.scale=r},e.easings.easeOutElastic)}function b(t,r,a,s=!1){const n=s?-1:1;e.drawSprite({sprite:"diamond",pos:e.vec2(t.xOffset*n,0),anchor:"center",flipX:s}),e.drawText({text:r.toString(),size:14,pos:e.vec2(t.xOffset*n+.3,-.5),anchor:"center",align:"center",font:"Numbers",letterSpacing:-10});for(let o=0;o<a;o++){const c=n*(t.xOffset+11),l=o*t.spacing+6,d=o%2===0?0:t.spacing;e.drawSprite({sprite:"point",frame:o<r?0:1,opacity:o<r?1:.5,pos:e.vec2(c-n*d,n*l),anchor:"center",flipY:!s,flipX:!s})}}function I(){const t=e.add([e.pos(i.xPosition,e.height()-i.yOffset),e.anchor("center"),e.layer("game"),{canShoot:!1,reloadSpeed:10,bulletSpeed:3,ammo:5,maxAmmo:0},"player"]);t.maxAmmo=t.ammo;const r=t.add([e.sprite("hero"),e.pos(),e.animate({relative:!0}),e.layer("game"),e.z(1),e.anchor("center"),e.timer()]);return y(r),t.onDraw(()=>{i.mode==="game"&&b(i,t.ammo,t.maxAmmo,!0)}),t.shoot=()=>{if(t.ammo>0&&t.canShoot){let s=function(){a.unuse("move"),a.sprite="hit",a.play("play"),a.onAnimEnd(n=>{a.destroy()})};t.ammo-=1,t.canShoot=!1,e.wait(.1*t.reloadSpeed,()=>{t.canShoot=!0}),r.unanimate("pos"),w(r);const a=e.add([e.pos(t.pos),e.sprite("bullet",{anim:"play"}),e.area({scale:.4}),e.offscreen({destroy:!0}),e.anchor("center"),e.layer("game"),e.move(e.UP,t.bulletSpeed*30),"bullet"]);a.onCollide("shield",()=>{s()}),a.onCollide("crown",()=>{s()}),y(r)}},t}const z={TEST:{health:()=>1,shields:()=>1,radius:()=>40,speed:()=>.3,score:()=>e.randi(8,11)},easy:{health:()=>e.randi(3,5),shields:()=>e.randi(3,5),radius:()=>40,speed:()=>e.rand(.45,.7),score:()=>3},medium:{health:()=>e.randi(4,6),shields:()=>e.randi(4,6),radius:()=>36,speed:()=>e.rand(1.1,1.2),score:()=>e.randi(5,8)},hard:{health:()=>e.randi(6,9),shields:()=>e.randi(5,7),radius:()=>36,speed:()=>e.rand(1.4,1.5),score:()=>e.randi(9,12)},imposible:{health:()=>e.randi(9,11),shields:()=>e.randi(6,8),radius:()=>32,speed:()=>e.rand(1.7,1.8),score:()=>16}};function T(t="easy"){const r=z[t];return{health:r.health(),shields:r.shields(),radius:r.radius(),speed:r.speed(),score:r.score()}}function k(t,r,a){return e.vec2(t.x+(r.x-t.x)*a,t.y+(r.y-t.y)*a)}function A(t,r,a,s){const n=2*Math.PI/a*r+t;return e.vec2(Math.cos(n)*s,Math.sin(n)*s)}function E(t,r,a,s){const n=(r/a+t*.1)%1,o=Math.floor(n*4),c=n*4%1;switch(o){case 0:return e.vec2(-s+2*s*c,-s);case 1:return e.vec2(s,-s+2*s*c);case 2:return e.vec2(s-2*s*c,s);case 3:return e.vec2(-s,s-2*s*c)}}function M(t,r,a,s){let n=(r/a+t*.1)%1;n>=1&&(n=0);const o=n*3;let c=Math.floor(o);c>=3&&(c=2);const l=o-c,d=Math.sqrt(3)*s,h=[e.vec2(0,-d/2),e.vec2(-s,d/2),e.vec2(s,d/2)],f=h[c],p=h[(c+1)%3];return k(f,p,l)}function F(t){const r="circle",a=e.randi(7),s=a!=4&&e.rand()<.5;for(let n=0;n<t.shields;n++){const o=e.add([e.sprite("shield",{frame:a,flipX:s}),e.anchor("center"),e.area({scale:e.vec2(.65,.5),offset:e.vec2(0,1.4)}),e.pos(t.pos),e.layer("game"),e.timer(),e.z(1),"shield"]);o.onCollide("bullet",()=>{w(o)}),t.createdShields.push({shield:o,index:n})}t.onUpdate(()=>{if(!t.has("health"))return;const n=e.time()*t.speed*t.direction;let o=e.vec2(0,0);t.createdShields.forEach(({shield:c,index:l})=>{switch(r){case"circle":o=A(n,l,t.shields,t.radius);break;case"square":o=E(n,l,t.shields,t.radius);break;case"triangle":o=M(n,l,t.shields,t.radius);break}c.moveTo(t.pos.x+o.x,t.pos.y+o.y)})}),t.onDeath(()=>{t.createdShields.forEach(({shield:n},o)=>{e.wait(.3*o,()=>{n.sprite="explode",n.play("play"),n.onAnimEnd(c=>{n.destroy()})})})})}function v(){const t=T(i.difficulty),r=e.add([e.health(t.health),e.pos(i.xPosition,i.yOffset+5),e.area({shape:new e.Rect(e.vec2(0),16,16)}),e.anchor("center"),e.layer("game"),e.particles({max:100,speed:[60,80],damping:[2,3],lifeTime:[.85,1.2],angle:[0,360],texture:e.getSprite("hit").data.tex,quads:[e.getSprite("hit").data.frames[0],e.getSprite("explode").data.frames[1],e.getSprite("explode").data.frames[0]]},{direction:0,spread:360}),{shields:t.shields,radius:t.radius,speed:t.speed,score:t.score,direction:e.rand()<.5?1:-1,createdShields:[]},"crown"]),a=r.add([e.sprite("crown"),e.pos(),e.anchor("center"),e.animate({relative:!0}),e.timer()]);return y(a),r.onDraw(()=>{i.mode!=="game"||!r.has("health")||b(i,r.hp,r.maxHP)}),F(r),r.onCollide("bullet",()=>{S(a),w(a),r.hp-=1}),r.onDeath(()=>{r.unuse("health"),e.shake(4);const s=.25*r.createdShields.length+1;S(a,s,2),e.loop(.25,()=>{r.emit(4)},r.createdShields.length+1),e.tween(i.score,i.score+=r.score,s,n=>i.score=Math.ceil(n),e.easings.easeOutQuint),e.wait(s,()=>{e.shake(2),r.destroy()})}),r}e.scene("game",()=>{e.onResize(()=>{i.yOffset=x(),i.xPosition=e.center().x});function t(){return e.vec2(e.randi(4,32-a-4),e.randi(4,32-a-4))}let r="bg0";const a=Math.floor(e.width()/16/2);let s=t();e.add([e.layer("background")]).onDraw(()=>{e.drawSprite({sprite:r.toString(),pos:e.vec2(s.x*-16,s.y*-16)})});const o=I();o.canShoot=!0;const c=e.vec2(e.center().x+i.xOffset,o.pos.y);v(),e.onDestroy("crown",()=>{e.wait(.25,()=>{v(),m()})}),e.onCollide("crown","bullet",(p,O)=>{e.shake(1),o.ammo+=1}),e.onCollide("shield","bullet",(p,O)=>{e.shake(1)}),e.onUpdate(()=>{o.ammo===0&&e.get("bullet").length<=0&&(i.mode="over")});function l(){i.mode==="start"?i.mode="game":o.shoot()}e.onButtonPress("secondary",()=>{m(),s=t()}),e.onButtonDown("primary",()=>{l()});let d=1,h=0;function f(){e.tween(1,0,1,p=>d=p,e.easings.easeInOutCubic).onEnd(()=>{h==e.getSprite("inputs").data.frames.length-1?h=0:h+=1,e.tween(0,1,1,p=>d=p,e.easings.easeInOutCubic).onEnd(()=>{e.wait(3,()=>{f()})})})}e.wait(4,()=>{f()}),e.onDraw(()=>{i.mode=="start"?(e.drawSprite({sprite:"inputs",pos:e.vec2(e.center().x-7.7,e.center().y+20),opacity:d,frame:h,anchor:"center"}),e.drawText({text:"Press     to shoot",anchor:"center",align:"center",pos:e.vec2(e.center().x,e.center().y+20),letterSpacing:-5,size:14}),e.drawText({text:"by FABRIC VISIONS",anchor:"center",align:"center",pos:e.vec2(e.center().x,e.center().y+92),letterSpacing:-2.8,size:8,opacity:.4})):i.mode=="game"?i.score>0&&(e.drawText({text:String(i.score).padStart(2,"0"),size:28,pos:e.vec2(c.x,c.y-6),anchor:"center",align:"center",font:"Numbers",letterSpacing:-18}),e.drawText({text:"SCORE",size:8,pos:e.vec2(c.x-.4,c.y+6),anchor:"center",align:"center",letterSpacing:-2,opacity:.5})):i.mode=="over"&&e.go("over")})});e.scene("menu",t=>{e.onDraw(()=>{e.drawSprite({sprite:"TITLE",anchor:"center",pos:e.vec2(e.center().x,e.center().y+16)}),e.drawText({text:"10   %",size:10,width:120,anchor:"center",align:"center",letterSpacing:-2,pos:e.vec2(e.center().x,e.center().y-16)})})});e.loadSpriteAtlas("sprites/gui-sheet.png",{diamond:{x:0,y:0,width:16,height:16},point:{x:32,y:0,width:32,height:16,sliceX:2},RIP:{x:0,y:16,width:16,height:16},border:{x:16,y:0,width:16,height:16,slice9:{left:2,right:2,top:2,bottom:2}},restart:{x:16,y:16,width:16,height:16},inputs:{x:0,y:32,width:80,height:16,sliceX:5}});e.loadSpriteAtlas("sprites/tileset.png",{hero:{x:16,y:0,width:16,height:16},bullet:{x:32,y:0,width:32,height:16,sliceX:2,anims:{play:{from:0,to:1,loop:!0}}},crown:{x:0,y:0,width:16,height:16},shield:{x:0,y:16,width:64,height:32,sliceX:4,sliceY:2}});e.loadSpriteAtlas("sprites/fx-sheet.png",{explode:{x:0,y:0,width:96,height:16,sliceX:6,anims:{play:{from:0,to:5,speed:12}}},hit:{x:0,y:16,width:64,height:16,sliceX:4,anims:{play:{from:0,to:3,speed:12}}},particle:{x:64,y:16,width:32,height:16,sliceX:2}});e.loadSprite("bg0","map/backgrounds/png/Level_0.png");e.setLayers(["background","game","foreground","shader"],"shader");e.onLoad(()=>{e.go("game")});
//# sourceMappingURL=index-B83srJ39.js.map
